<!DOCTYPE html>
<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
<head>
    <meta charset='utf-8'>
    <title>Crop Recommender - Algorithm Overview</title>
    <style>
        body { font-family: 'Calibri', Arial, sans-serif; line-height: 1.6; margin: 40px; }
        h1 { color: #2E7D32; border-bottom: 3px solid #4CAF50; padding-bottom: 10px; font-size: 28pt; }
        h2 { color: #388E3C; margin-top: 30px; font-size: 20pt; border-bottom: 2px solid #81C784; padding-bottom: 5px; }
        h3 { color: #43A047; margin-top: 20px; font-size: 16pt; }
        h4 { color: #66BB6A; margin-top: 15px; font-size: 14pt; }
        p { text-align: justify; margin: 10px 0; font-size: 11pt; }
        ul, ol { margin: 10px 0; padding-left: 30px; }
        li { margin: 8px 0; font-size: 11pt; }
        .section { margin: 20px 0; padding: 15px; background-color: #F1F8E9; border-left: 4px solid #4CAF50; }
        .algorithm-box { background-color: #E8F5E9; padding: 15px; margin: 15px 0; border: 1px solid #4CAF50; border-radius: 5px; }
        .formula { background-color: #FFF9C4; padding: 10px; margin: 10px 0; font-family: 'Courier New', monospace; border-left: 3px solid #FBC02D; }
        table { border-collapse: collapse; width: 100%; margin: 15px 0; }
        th { background-color: #4CAF50; color: white; padding: 12px; text-align: left; font-size: 11pt; }
        td { border: 1px solid #ddd; padding: 10px; font-size: 10pt; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        .highlight { background-color: #FFEB3B; padding: 2px 5px; }
        .note { background-color: #E3F2FD; padding: 10px; margin: 10px 0; border-left: 3px solid #2196F3; }
    </style>
</head>
<body>
    <h1>ðŸŒ¾ CROP RECOMMENDER SYSTEM</h1>
    <h2>Algorithm & Techniques Documentation</h2>
    
    <div class="section">
        <h3>Document Information</h3>
        <table>
            <tr>
                <td><strong>Project Name:</strong></td>
                <td>Crop Recommender System</td>
            </tr>
            <tr>
                <td><strong>Version:</strong></td>
                <td>1.0</td>
            </tr>
            <tr>
                <td><strong>Technology Stack:</strong></td>
                <td>React + TypeScript, Node.js, Express.js, SQLite, DanfoJS, TensorFlow.js</td>
            </tr>
            <tr>
                <td><strong>Document Purpose:</strong></td>
                <td>Comprehensive documentation of all algorithms, techniques, and methods used</td>
            </tr>
        </table>
    </div>

    <h2>1. EXECUTIVE SUMMARY</h2>
    <p>
        The Crop Recommender System is an intelligent agricultural decision support system that leverages multiple algorithms 
        and data processing techniques to provide personalized crop recommendations to farmers. The system integrates <strong>machine 
        learning neural networks (TensorFlow.js)</strong>, statistical analysis, economic modeling, and real-time data integration to optimize crop selection 
        based on environmental factors, soil conditions, market trends, and financial constraints. The hybrid approach combines 
        traditional rule-based algorithms (70%) with AI-powered yield predictions (30%) for enhanced accuracy.
    </p>

    <h2>2. SYSTEM ARCHITECTURE OVERVIEW</h2>
    <div class="algorithm-box">
        <h3>2.1 Core Components</h3>
        <ul>
            <li><strong>Frontend Layer:</strong> React-based UI with Redux state management</li>
            <li><strong>Backend Layer:</strong> RESTful API built with Express.js and Node.js</li>
            <li><strong>Data Processing Layer:</strong> DanfoJS for data manipulation and analysis</li>
            <li><strong>ML/AI Layer:</strong> TensorFlow.js neural network for crop yield prediction (4-layer MLP trained on 19,000+ records)</li>
            <li><strong>Database Layer:</strong> SQLite for persistent storage + LocalStorage for ML model</li>
            <li><strong>External APIs:</strong> OpenWeather API, AGMARKNET (Government Agriculture Market)</li>
        </ul>
    </div>

    <h2>3. ALGORITHM CATEGORIES</h2>
    <p>The system employs the following algorithm categories:</p>
    
    <table>
        <tr>
            <th>Category</th>
            <th>Purpose</th>
            <th>Implementation</th>
        </tr>
        <tr>
            <td><strong>Data Filtering Algorithms</strong></td>
            <td>Filter crop data based on geographical and seasonal parameters</td>
            <td>Multi-level cascading filters with fallback mechanisms</td>
        </tr>
        <tr>
            <td><strong>Scoring Algorithms</strong></td>
            <td>Calculate suitability scores for crops and farming types</td>
            <td>Weighted multi-criteria scoring systems</td>
        </tr>
        <tr>
            <td><strong>Normalization Techniques</strong></td>
            <td>Standardize data for consistent comparison</td>
            <td>Min-Max normalization on numeric features</td>
        </tr>
        <tr>
            <td><strong>Economic Modeling</strong></td>
            <td>Calculate costs, revenue, and profitability</td>
            <td>ROI-based financial analysis</td>
        </tr>
        <tr>
            <td><strong>Recommendation Algorithms</strong></td>
            <td>Generate personalized crop suggestions</td>
            <td>Hybrid filtering with companion cropping logic</td>
        </tr>
        <tr>
            <td><strong>Price Prediction</strong></td>
            <td>Fetch and cache market prices</td>
            <td>API integration with caching and fallback strategies</td>
        </tr>
        <tr>
            <td><strong>Weather Integration</strong></td>
            <td>Incorporate climate data in recommendations</td>
            <td>Real-time API integration with mock fallback</td>
        </tr>
        <tr>
            <td><strong>Machine Learning (Neural Network)</strong></td>
            <td>AI-powered crop yield prediction and suitability scoring</td>
            <td>TensorFlow.js 4-layer MLP with MSE loss and Adam optimizer</td>
        </tr>
    </table>

    <h2>4. KEY TECHNICAL APPROACHES</h2>
    
    <h3>4.1 Multi-Level Filtering Strategy</h3>
    <p>
        The system implements a sophisticated cascading filter mechanism that progressively relaxes constraints 
        when exact matches are not found, ensuring users always receive relevant recommendations.
    </p>
    
    <h3>4.2 Weighted Scoring System</h3>
    <p>
        Multiple factors are combined using weighted averages to produce comprehensive suitability scores. The system uses a 
        <strong>hybrid approach: 70% traditional scoring</strong> (budget, profitability, yield, ROI) <strong>+ 30% ML-based suitability</strong> 
        from neural network predictions, allowing for nuanced decision-making based on both domain knowledge and learned patterns.
    </p>
    
    <h3>4.3 Real-Time Data Integration</h3>
    <p>
        Live market prices and weather data are fetched from external APIs, with intelligent caching (30-minute 
        duration) to optimize performance while maintaining data freshness.
    </p>
    
    <h3>4.4 Economic Viability Analysis</h3>
    <p>
        Each recommendation includes detailed financial projections including input costs (fertilizer, pesticides, 
        seeds, labor), expected yields, revenue forecasts, and profit margins.
    </p>

    <h2>5. ALGORITHM WORKFLOW</h2>
    <div class="algorithm-box">
        <h3>Complete Recommendation Process</h3>
        <ol>
            <li><strong>Data Collection:</strong> Load crop dataset from CSV (10,000+ records)</li>
            <li><strong>User Profile Analysis:</strong> Extract state, acreage, soil type, budget, season</li>
            <li><strong>Data Filtering:</strong> Apply cascading filters (state â†’ season â†’ soil compatibility)</li>
            <li><strong>Data Aggregation:</strong> Group by crop name and calculate median values</li>
            <li><strong>ML Prediction:</strong> Use TensorFlow.js neural network to predict yield and suitability (if model is trained)</li>
            <li><strong>Live Price Fetching:</strong> Query AGMARKNET API for current market prices</li>
            <li><strong>Cost Calculation:</strong> Compute input costs per hectare</li>
            <li><strong>Revenue Estimation:</strong> Calculate expected income based on yield and prices</li>
            <li><strong>Score Computation:</strong> Apply hybrid scoring algorithm (70% traditional + 30% ML)</li>
            <li><strong>Ranking & Sorting:</strong> Sort by composite score</li>
            <li><strong>Companion Crop Analysis:</strong> Identify intercropping opportunities</li>
            <li><strong>Result Generation:</strong> Return top 8-10 recommendations</li>
            <li><strong>Database Persistence:</strong> Save top 3 recommendations for history</li>
        </ol>
    </div>

    <h2>6. DATA SOURCES</h2>
    <table>
        <tr>
            <th>Data Source</th>
            <th>Type</th>
            <th>Size/Coverage</th>
            <th>Update Frequency</th>
        </tr>
        <tr>
            <td>Crop Dataset (CSV)</td>
            <td>Historical agricultural data</td>
            <td>10,000+ records covering Indian states</td>
            <td>Static (periodic updates)</td>
        </tr>
        <tr>
            <td>Soil Dataset (CSV)</td>
            <td>Soil type compatibility matrix</td>
            <td>Multiple soil types with crop mappings</td>
            <td>Static</td>
        </tr>
        <tr>
            <td>AGMARKNET API</td>
            <td>Live market prices</td>
            <td>Pan-India commodity prices</td>
            <td>Real-time (cached 30 min)</td>
        </tr>
        <tr>
            <td>OpenWeather API</td>
            <td>Weather forecasts</td>
            <td>7-day forecast for any location</td>
            <td>Real-time (API dependent)</td>
        </tr>
        <tr>
            <td>MSP Database</td>
            <td>Minimum Support Prices (2024-25)</td>
            <td>Government-declared MSP for major crops</td>
            <td>Annual</td>
        </tr>
    </table>

    <h2>7. PERFORMANCE OPTIMIZATIONS</h2>
    <ul>
        <li><strong>Caching Strategy:</strong> 30-minute price cache to reduce API calls</li>
        <li><strong>Median Aggregation:</strong> Using median instead of mean for stable yield estimates</li>
        <li><strong>Lazy Loading:</strong> CSV data fetched only when needed</li>
        <li><strong>Parallel Processing:</strong> Multiple API calls made concurrently</li>
        <li><strong>Abort Signal:</strong> 5-second timeout on external API calls</li>
        <li><strong>Fallback Mechanisms:</strong> Graceful degradation when APIs fail</li>
    </ul>

    <div class="note">
        <h3>ðŸ“Œ Note on Accuracy</h3>
        <p>
            The system's recommendations are based on historical data, current market conditions, and agricultural best 
            practices. Actual results may vary based on local conditions, farming expertise, climate variations, and 
            market fluctuations. Farmers should consult with local agricultural experts before making final decisions.
        </p>
    </div>

    <h2>8. FUTURE ENHANCEMENTS</h2>
    <ul>
        <li><strike>Integration of TensorFlow.js for predictive yield modeling</strike> <strong>(âœ… COMPLETED)</strong></li>
        <li>Ensemble methods combining multiple ML models</li>
        <li>Weather-based yield adjustment using forecast data</li>
        <li>Machine learning-based price forecasting</li>
        <li>Climate change impact analysis</li>
        <li>Pest and disease prediction algorithms</li>
        <li>Satellite imagery integration for soil health assessment</li>
        <li>IoT sensor data integration for real-time field monitoring</li>
        <li>Transfer learning for regional model adaptation</li>
    </ul>

    <hr style="margin: 30px 0;">
    <p style="text-align: center; color: #666; font-size: 9pt;">
        <em>This document provides a comprehensive overview of all algorithms and techniques used in the Crop Recommender System.</em><br>
        <em>For detailed implementation of specific algorithms, refer to subsequent documentation files.</em>
    </p>
</body>
</html>