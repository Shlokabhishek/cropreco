<!DOCTYPE html>
<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
<head>
    <meta charset='utf-8'>
    <title>Quick Reference Card - Algorithms Summary</title>
    <style>
        @page { size: A4 landscape; margin: 1cm; }
        body { font-family: 'Calibri', Arial, sans-serif; line-height: 1.4; margin: 20px; font-size: 9pt; }
        h1 { color: #1B5E20; text-align: center; font-size: 20pt; margin: 10px 0; border-bottom: 3px solid #4CAF50; padding-bottom: 5px; }
        h2 { color: #2E7D32; font-size: 12pt; margin: 15px 0 8px 0; border-bottom: 1px solid #81C784; padding-bottom: 3px; }
        h3 { color: #388E3C; font-size: 10pt; margin: 10px 0 5px 0; }
        p { margin: 5px 0; font-size: 9pt; }
        table { border-collapse: collapse; width: 100%; margin: 8px 0; font-size: 8pt; }
        th { background-color: #4CAF50; color: white; padding: 6px; text-align: left; font-size: 8pt; }
        td { border: 1px solid #ddd; padding: 4px; }
        .formula { background-color: #FFF9C4; padding: 5px; margin: 5px 0; font-family: 'Courier New', monospace; font-size: 8pt; border-left: 2px solid #FBC02D; }
        .two-column { display: flex; gap: 20px; }
        .column { flex: 1; }
        .box { background-color: #E8F5E9; padding: 8px; margin: 8px 0; border: 1px solid #4CAF50; }
        ul { margin: 5px 0; padding-left: 20px; }
        li { margin: 3px 0; font-size: 8pt; }
    </style>
</head>
<body>
    <h1>ðŸŒ¾ CROP RECOMMENDER SYSTEM - ALGORITHMS QUICK REFERENCE CARD</h1>

    <div class="two-column">
        <div class="column">
            <h2>1. CORE RECOMMENDATION ALGORITHM</h2>
            <div class="box">
                <h3>recommendCrops(cropData, profile, livePrices)</h3>
                <div class="formula">
Input: CropData[], Profile, LivePrices<br>
Output: CropRecommendation[] (sorted by score)<br>
<br>
Steps:<br>
1. Multi-level filtering (5 stages)<br>
2. Group by crop name<br>
3. Calculate median yield<br>
4. Compute costs & revenue<br>
5. Calculate composite score<br>
6. Sort & return top 8-10
                </div>
            </div>

            <h2>2. FILTERING STRATEGY</h2>
            <table>
                <tr><th>Level</th><th>Condition</th><th>Fallback</th></tr>
                <tr><td>1</td><td>State + Season</td><td>â†’ Level 2</td></tr>
                <tr><td>2</td><td>State Only</td><td>â†’ Level 3</td></tr>
                <tr><td>3</td><td>Partial State</td><td>â†’ Level 4</td></tr>
                <tr><td>4</td><td>Season Only</td><td>â†’ Level 5</td></tr>
                <tr><td>5</td><td>All Data</td><td>-</td></tr>
            </table>

            <h2>3. COMPOSITE SCORING</h2>
            <div class="formula">
finalScore = budgetScoreÃ—0.3 + profitScoreÃ—0.3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ yieldScoreÃ—0.2 + roiScoreÃ—0.2<br>
<br>
budgetScore = min(1, budget/cost)<br>
profitScore = min(1, profit/200000)<br>
yieldScore = min(1, yield/10)<br>
roiScore = min(1, profit/cost)
            </div>

            <h2>4. COST CALCULATION</h2>
            <table>
                <tr><th>Cost Item</th><th>Formula (INR/hectare)</th></tr>
                <tr><td>Fertilizer</td><td>max(avgFert Ã— 0.05, 2000)</td></tr>
                <tr><td>Pesticide</td><td>max(avgPest Ã— 0.1, 1000)</td></tr>
                <tr><td>Labor</td><td>15,000 (fixed)</td></tr>
                <tr><td>Seeds</td><td>5,000 (fixed)</td></tr>
                <tr><td><strong>Total/hectare</strong></td><td><strong>Sum of above</strong></td></tr>
            </table>

            <h2>5. FARMING TYPE SCORES</h2>
            <table>
                <tr><th>Type</th><th>Base</th><th>Max</th><th>Key Factors</th></tr>
                <tr><td>Organic</td><td>0.50</td><td>0.85</td><td>Soil, Size â‰¤10, Budget â‰¥30k</td></tr>
                <tr><td>Intensive</td><td>0.40</td><td>0.85</td><td>Budget â‰¥1L, Size â‰¥5</td></tr>
                <tr><td>Mixed</td><td>0.55</td><td>0.80</td><td>Size 3-15, Budget â‰¥50k</td></tr>
                <tr><td>Precision</td><td>0.30</td><td>0.75</td><td>Budget â‰¥2L, Size â‰¥10</td></tr>
                <tr><td>Sustainable</td><td>0.60</td><td>0.90</td><td>Size â‰¤20, Budget â‰¥40k</td></tr>
            </table>
        </div>

        <div class="column">
            <h2>6. DATA NORMALIZATION</h2>
            <div class="box">
                <h3>Min-Max Normalization</h3>
                <div class="formula">
normalized = (value - min) / (max - min)<br>
Range: [0, 1]<br>
<br>
Normalized Columns:<br>
â€¢ Area_norm<br>
â€¢ Production_norm<br>
â€¢ Annual_Rainfall_norm<br>
â€¢ Fertilizer_norm<br>
â€¢ Yield_norm<br>
â€¢ Price_norm
                </div>
            </div>

            <h2>7. FEATURE ENGINEERING</h2>
            <div class="formula">
Soil_Score = 0.5 (baseline)<br>
<br>
Market_Score = 0.5 Ã— Production_norm<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ 0.4 Ã— Yield_norm<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ 0.1 Ã— Price_norm
            </div>

            <h2>8. API INTEGRATION</h2>
            <table>
                <tr><th>API</th><th>Purpose</th><th>Cache</th><th>Timeout</th></tr>
                <tr><td>AGMARKNET</td><td>Market prices</td><td>30 min</td><td>5s</td></tr>
                <tr><td>OpenWeather</td><td>Forecasts</td><td>Session</td><td>-</td></tr>
            </table>

            <h2>9. CACHING STRATEGY</h2>
            <div class="box">
                <div class="formula">
Request â†’ Check cache<br>
&nbsp;&nbsp;â†“<br>
If fresh (< 30 min) â†’ Return cached<br>
&nbsp;&nbsp;â†“<br>
If stale â†’ Fetch API<br>
&nbsp;&nbsp;â†“<br>
If API fails â†’ MSP fallback
                </div>
            </div>

            <h2>10. COMPANION CROPS</h2>
            <table>
                <tr><th>Primary Crop</th><th>Compatible With</th></tr>
                <tr><td>Rice</td><td>Pulses, Gram, Moong, Urad</td></tr>
                <tr><td>Wheat</td><td>Gram, Mustard, Linseed</td></tr>
                <tr><td>Maize</td><td>Beans, Groundnut, Soyabean</td></tr>
                <tr><td>Cotton</td><td>Groundnut, Moong, Gram</td></tr>
                <tr><td>Sugarcane</td><td>Potato, Onion, Turmeric</td></tr>
            </table>

            <h2>11. PERFORMANCE METRICS</h2>
            <table>
                <tr><th>Operation</th><th>Time</th></tr>
                <tr><td>CSV Parsing</td><td>200-500ms</td></tr>
                <tr><td>Filtering</td><td>50-100ms</td></tr>
                <tr><td>Scoring</td><td>20-40ms</td></tr>
                <tr><td>API (Fresh)</td><td>800-1500ms</td></tr>
                <tr><td>API (Cached)</td><td>2-5ms</td></tr>
                <tr><td><strong>Total Pipeline</strong></td><td><strong>~1 second</strong></td></tr>
            </table>

            <h2>12. BUDGET RELAXATION</h2>
            <table>
                <tr><th>Stage</th><th>Constraint</th><th>Trigger</th></tr>
                <tr><td>1</td><td>Cost â‰¤ Budget Ã— 1.5</td><td>Always</td></tr>
                <tr><td>2</td><td>Cost â‰¤ Budget Ã— 3</td><td>If < 5 results</td></tr>
                <tr><td>3</td><td>Best profitable</td><td>If < 3 results</td></tr>
            </table>
        </div>
    </div>

    <hr style="margin: 15px 0; border: 2px solid #4CAF50;">

    <div style="display: flex; justify-content: space-between; font-size: 8pt; color: #666;">
        <div><strong>Crop Recommender System</strong> | Algorithm Quick Reference v1.0</div>
        <div>For detailed documentation, see Algorithm_Documentation folder</div>
        <div>Â© 2026 | Print this page for desk reference</div>
    </div>
</body>
</html>